<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <record id="view_partner_inherit_company_structure" model="ir.ui.view">
        <field name="name">view.partner.inherit.company.structure</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="account.view_partner_property_form"/>
        <field name="arch" type="xml">
            <field name="parent_id" position="attributes">
                <attribute name="attrs">{
                    'invisible': [('company_name', '!=', False), ('company_name', '!=', '')]}</attribute>
            </field>

            <xpath expr="//group[1]/div[hasclass('o_address_format')]/field[@name='street']" position="attributes">
              <attribute name="attrs">{'readonly': [('type', '=', 'contact'), ('parent_id', '!=', False), ('is_company', '!=', True)]}</attribute>
            </xpath>
            <xpath expr="//group[1]/div[hasclass('o_address_format')]/field[@name='street2']" position="attributes">
              <attribute name="attrs">{'readonly': [('type', '=', 'contact'), ('parent_id', '!=', False), ('is_company', '!=', True)]}</attribute>
            </xpath>
            <xpath expr="//group[1]/div[hasclass('o_address_format')]/field[@name='city']" position="attributes">
              <attribute name="attrs">{'readonly': [('type', '=', 'contact'), ('parent_id', '!=', False), ('is_company', '!=', True)]}</attribute>
            </xpath>
            <xpath expr="//group[1]/div[hasclass('o_address_format')]/field[@name='state_id']" position="attributes">
              <attribute name="attrs">{'readonly': [('type', '=', 'contact'), ('parent_id', '!=', False), ('is_company', '!=', True)]}</attribute>
            </xpath>
            <xpath expr="//group[1]/div[hasclass('o_address_format')]/field[@name='zip']" position="attributes">
              <attribute name="attrs">{'readonly': [('type', '=', 'contact'), ('parent_id', '!=', False), ('is_company', '!=', True)]}</attribute>
            </xpath>
            <xpath expr="//group[1]/div[hasclass('o_address_format')]/field[@name='country_id']" position="attributes">
              <attribute name="attrs">{'readonly': [('type', '=', 'contact'), ('parent_id', '!=', False), ('is_company', '!=', True)]}</attribute>
            </xpath>
          
            <xpath expr="//div[1]/div[hasclass('o_address_format')]" position="inside">
              <field name="is_company" invisible="1"/>
            </xpath>
          
            <xpath expr="//div[1]/div[hasclass('o_address_format')]/field[@name='street']" position="attributes">
              <attribute name="attrs">{'readonly': [('type', '=', 'contact'), ('parent_id', '!=', False), ('is_company', '!=', True)]}</attribute>
            </xpath>
            <xpath expr="//div[1]/div[hasclass('o_address_format')]/field[@name='street2']" position="attributes">
              <attribute name="attrs">{'readonly': [('type', '=', 'contact'), ('parent_id', '!=', False), ('is_company', '!=', True)]}</attribute>
            </xpath>
            <xpath expr="//div[1]/div[hasclass('o_address_format')]/field[@name='city']" position="attributes">
              <attribute name="attrs">{'readonly': [('type', '=', 'contact'), ('parent_id', '!=', False), ('is_company', '!=', True)]}</attribute>
            </xpath>
            <xpath expr="//div[1]/div[hasclass('o_address_format')]/field[@name='state_id']" position="attributes">
              <attribute name="attrs">{'readonly': [('type', '=', 'contact'), ('parent_id', '!=', False), ('is_company', '!=', True)]}</attribute>
            </xpath>
            <xpath expr="//div[1]/div[hasclass('o_address_format')]/field[@name='zip']" position="attributes">
              <attribute name="attrs">{'readonly': [('type', '=', 'contact'), ('parent_id', '!=', False), ('is_company', '!=', True)]}</attribute>
            </xpath>
            <xpath expr="//div[1]/div[hasclass('o_address_format')]/field[@name='country_id']" position="attributes">
              <attribute name="attrs">{'readonly': [('type', '=', 'contact'), ('parent_id', '!=', False), ('is_company', '!=', True)]}</attribute>
            </xpath>
            
            <group name="accounting_entries" position="inside">
                <field name="possible_partner_invoice_ids" invisible="1"/>
                <field name="partner_invoice_id"/>
            </group>

            <notebook position="inside">
                <page name="child_companies" string="Child companies">
                    <field name="child_company_ids" mode="kanban" readonly="1"/>
                </page>
            </notebook>
        </field>
    </record>

    <record id="view_move_form_invoice_address" model="ir.ui.view">
        <field name="name">view.move.form.invoice.address</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
            <field name="partner_id" position="after">
                <field name="possible_referred_partner_ids" invisible="1"/>
                <field name="referred_partner_id" widget="res_partner_many2one"/>
            </field>
        </field>
    </record>

</odoo>